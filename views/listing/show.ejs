<% layout("/layout/boilerplate.ejs") %>

    <body>
        <div class="row">
            <div class="col-8 offset-2">
                <br>
                <h2>List information</h2>
                <br>
                <div class="card" style="width: 40rem;">
                    <img src="<%= list.image %>" class="card-img-top show-img" alt="...">
                    <div class="card-body">
                        <p class="card-text">
                            <b>
                                <%= list.title %>
                            </b> <br>
                            <%= list.description %> <br>
                                &#8377;<%= list.price.toLocaleString("en-IN") %> <br>
                                    <%= list.location %> <br>
                                        <%= list.country %> <br>
                                            <br>
                                            <div class="show-btn">
                                                <form action="/listings/<%= list._id %>/edit">
                                                    <button class="btn btn-dark edit-btn"> edit </button>
                                                </form>
                                                &nbsp;
                                                <form action="/listings/<%= list._id %>?_method=delete" method="post">
                                                    <button class="btn btn-dark"> delete </button>
                                                </form>
                                            </div>
                        
                <hr>
                <div class="mt-3 mb-3">
                    <h4> Add a review</h4>
                    <form action="/listings/<%= list._id %>/reviews" method="post" novalidate class="needs-validation">
                        <div class="mt-3 mb-3">
                            <label for="rating" class="form-label">Rating</label>
                            <input type="range" min="1" max="5" name="review[rating]" class="form-control">
                        </div>
                        <div class="mt-3 mb-3">
                            <label for="comment" class="form-label">Comment</label>
                            <textarea name="review[comment]" id="" rows="5" cols="100" class="form-control"
                                required></textarea>
                            <div class="invalid-feedback">
                                Please enter a comment to submit.
                            </div>
                        </div>
                        <div class="mt-3 mb-3">
                            <button class="btn btn-dark">add review</button>
                        </div>

                    </form>
                    </p>
                    </div>
                </div>
                    <br>
                    <hr>
                    <br>
                    <h4><b>Reviews</b> </h4>

                    <div class="row">
                        <% for(let review of list.reviews){ %>
                            <div class="card review-card col-5 ms-5 mb-3 mt-2">
                                <div class="card-body mb-1">
                                    <p class="card-text">
                                        <%= review.comment %>
                                    </p>
                                    <p class="card-text">
                                        <%= review.rating %> stars
                                    </p>

                                </div>
                                
                                <form action="/listings/<%= list._id %>/reviews/<%= review._id %>?_method=delete"
                                    class="mb-3" method="post">
                                    <button class="btn btn-dark">Delete</button>
                                </form>
                            </div>
                            <% } %>
                    </div>
                </div>



            </div>
        </div>

    </body>